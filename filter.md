# filter란
## 실제 개념
필터는 클라이언트의 요청과 서버의 응답을 서블릿 컨테이너 레벨(dispatcherservlet 실행 이전 단계)에서 가로채어 처리하는 컴포넌트입니다. 
HTTP 요청이 서블릿이 도달하기 전과 클라이언트에게 전송되기 전에 공통적으로 수행해야 하는 작업들을 처리할 수 있습니다.
공통기능이라하면 요청 및 응답 데이터 검사, **인코딩 설정**, **인증 및 권한** (예: 스프링 시큐리티 필터), **로깅**, **트래픽 모니터링**, 압축, 캐싱 처리 등이 있을 수 있습니다. ( 그 중 실무에서 주로 뭐가 쓰임?)

자바 서블릿의 필터는 `javax.servlet.Filter` 인터페이스를 구현하여 만들 수 있습니다. 주요 매서드는 다음과 같습니다.
* `init(FilterConfig config)`: 서버 시작 시 1회 호출되어 필터 초기화 작업을 수행합니다.
* `doFilter(ServletRequset req, ServletResponse res, FilterChain chain)`
    * 매 요청마다 호출되도록 요청/응답을 가로채 처리합니다.
    * 이 매서드 내에서 `chain.doFilter(req, res)`을 호출해야 다음 필터 또는 서블릿으로 요청이 전달됩니다.
    * 필터 체인은 보통 앱 시작시 한번 구성됩니다.    
* `destroy()`: 서버 종료 또는 필터가 제거될 때 호출되어, 자원을 정리합니다.

### 스프링에서의 Filter 등록과 동작
* 스프링에서 Filter는 `@Component`, `@WebFilter`로 필터를 등록할 수 있습니다. 
* 스프링 시큐리티에서는 자체적으로 여러 보안 필터를 구성하여 인증과 권한 기능을 자동으로 제공합니다. 
* 필터들은 서블릿 컨테이너에서 실행되고, DispatcherServlet이 실행되기 전에 동작합니다.
* 따라서, 필터를 토앻 요청이 DispatcherServlet에 도달하기 전 다양한 전처리 작업이 가능합니다.
