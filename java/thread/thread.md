# 쓰레드란
## 실제 개념
### 쓰레드란?
쓰레드란, **프로세스 내에서 실행되는 최소 실행 단위**입니다. (프로세스는 실행중인 프로그램 전체를 뜻합니다.)
웹 브라우저가 한 탭이라는 프로세스 안에서 랜더링, 네트워크 요청 처리, 스크롤/입력 등 사용자 이벤트 처리 등의 작업들을 병렬로 진행할 수 있듯이 현대의 소프트웨어는 하나의 프로세스가 여러 작업을 동시에 수행할 수 있어야 합니다.  
이러한 각 작업마다 독립적인 실행 흐름이 필요하여 쓰레드 개념이 등장했습니다.

### Java의 쓰레드
Java는 프로그램이 실행되면 자동으로 `main`이라는 이름을 가진 하나의 기본 쓰레드가 실행됩니다. 이는 `Thread` 객체로 표현되고, `main()` 메서드를 실행합니다.  
Java는 기본적으로 동기적 실행 모델입니다. 즉, 코드가 위에서 아래로 한 줄씩 실행되며, 각 작업이 완료되어야 다음 줄로 넘어갑니다. 
하지만, 이렇게 모든 작업을 순차적으로 기다리다보면, 네트워크 응답 지연, 파일 IO, 대량 연산 등과 같은 오래 걸리는 작업 때문에 전체 프로그램이 느려질 수 있습니다.
이 묹를 해결하기 위해 등장한 개념이 비동기 처리입니다. 
자바에서는 비동기를 구현할 때, 시간이 오래 걸리는 작업을 별도의 쓰레드에서 수행하도록 설계합니다. 

자바에서 쓰레드는 생명 주기를 갖고 있고, 상태는 `Thread.State` enum으로 표현됩니다.
```text
                  ┌──────────────┐
                  │    NEW       │
                  │(생성됨, start 전)
                  └─────┬────────┘
                        │ start()
                        ▼
                  ┌──────────────┐
                  │  RUNNABLE    │
                  │(실행 대기 or 실행 중)
                  └─┬─────┬──────┘
                    │     │
       ┌────────────┘     └────────────┐
       ▼                               ▼
┌──────────────┐                ┌────────────────┐
│  BLOCKED     │  <──── lock 획득 대기  │ WAITING  │
│ (모니터 락 대기)│                │ (무기한 대기)     │
└──────────────┘                └──────┬─────────┘
                                       │
                              notify() or join() 
                                       │
                          ┌────────────▼────────────┐
                          │     TIMED_WAITING       │
                          │  (일정 시간 대기 상태)      │
                          └────────────┬────────────┘
                                       │
                ┌──────────────────────┴────────────────────────┐
                │      sleep(), join(timeout), wait(timeout)    │
                └──────────────────────┬────────────────────────┘
                                       │
                                       ▼
                                ┌──────────────┐
                                │ TERMINATED   │
                                │ (실행 종료)    │
                                └──────────────┘
```
### 쓰레드 구동 방식
대표적인 JVM 구현체인 HotSpot을 예시로 설명하겠습니다.  
JVM의 역할은 `.class` 확장자를 가진 바이트코드를 기계어로 변환하여 어플리케이션을 실행하는 것입니다.

1. 쓰레드 생성
  어플리케이션이 실행되면, JVM 내에서 사용자 쓰레드가 `NEW` 상태로 생성됩니다. 
2. 커널 쓰레드 매핑
  HotSpot JVM은 유저 모드의 자바 쓰레드와 OS 커널 쓰레드를 1:1로 매핑합니다. 즉, JVM은 OS에게 커널 쓰레드 생성을 요청하고, 해당 쓰레드는 OS가 관리하게 됩니다.
3. 스케줄링과 실행
  커널 쓰레드는 OS의 CPU 스케줄러에 의해 실행 상태로 진입합니다. 이때, 쓰레드는 `Runnable`, `Running`, `Blocked`, `Waiting` 등 다양한 상태를 가질 수 있으며 이는 Java의 `Thread.State`에 대응될 수 있습니다.
4. 쓰레드 종료
  작업이 완료되면 쓰레드는 `Treminated` 상태로 전환되어 제거됩니다. 

참고로, HotSpot이라는 이름은 자주 호출되는 코드 (hot code) 를 동적으로 감지하여 JIT(Just-In-Time) 컴파일러를 적용하는 구조에서 유래합니다.
(JIT 추가 공부 필요)


- 스레드가 왜 만들어지는지?
- 쓰레드와 프로레스

## 내가 이해한 바
## 내가 개발할 때 신경 쓰는 점
## 개선된 점
