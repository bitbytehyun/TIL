# Hibernate란
## 실제 개념
하이버네이트는 자바의 대표적인 ORM 프레임워크로, 자바 표준 ORM 인터페이스인 JPA가 등장하기 전에 먼저 만들어진 구현체입니다. 
현재는 EclipseLink, OpenJPA 등과 함께 JPA의 구현체 중 하나로서 많이 사용됩니다. 

ORM이란 객체과 관계형 데이터베이스의 테이블을 매핑해서, 개발자가 SQL을 직접 작성하지 않고도 객체 조작만으로 DB와 상호작용할 수 있게 해주는 기술입니다. 
예를 들어, `User`라는 자바 객체를 DB의 `user` 테이블과 매핑해두면, `save(user)` 매서드 호출만으로도 insert SQL이 실행됩니다. 

### 동작 
1. `SessionFactory`
    * 어플리케이션 당 싱글턴 하나만 생성하여 세션을 생성하는 팩토리 역할을 합니다.
    * 내부적으로 엔티티 매핑 정보, db 연결 설정, sql dialect, 캐시 전략 등을 보관합니다.  
1. `Session`
    * 하나의 트랜젝션에서 사용되는 객체입니다.
    * 영속성 컨텍스트를 관리하며, DB 연결, 쿼리 실행, 트랜젝션 처리, 캐시 관리, flush/clear 호출 등 포괄적인 역할을 수행합니다. 
    * 1차 캐시를 갖고 있어서, 같은 트랜젝션 내에서 동일한 엔티티는 db를 조회하지 않고 캐시에서 반환합니다.
    * 스레드 세이프하지 않아서 요청마다 Session을 새롭게 만듭니다.  
1. `Persistence Context`
    * 엔티티와 db 상태 동기화를 담당합니다.
    * 변경 감지(Dirty Checking)을 통해 변경된 필드를 자동으로 update SQL로 반영합니다. 
1. 쿼리 실행
    * HQL 또는 Criteria API를 사용하여 객체 중심 쿼리를 작성합니다.
    * 필요시 native SQL도 사용할 수 있습니다.
### 장단점
**장점**
* SQL 작성량 감소하여 유지보수성이 향상됩니다.
* 객체 지향적인 개발이 가능해집니다.
* 1차/2차 캐시로 성능이 향상됩니다.
* sql dialect 지원으로 DB 벤더의 종속성이 완화됩니다.
**단점**
* 복잡한 쿼리는 결국 SQL 튜닝이 필요하여 
* 잘못된 fetch 전략을 설정하면
* 영속성 컨텍스트와 캐시 동작을 이해하지 못하면

* 
